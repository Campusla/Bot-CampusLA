<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Panel CampusLA</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #0f172a; color: white; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; font-family: sans-serif; }
        .card { background-color: #1e293b; border-radius: 20px; padding: 40px; width: 350px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.5); border: 1px solid #334155; }
        .btn-trigger { background-color: #3b82f6; border: none; color: white; font-weight: bold; padding: 15px; width: 100%; border-radius: 10px; cursor: pointer; }
        .status { background-color: #0f172a; padding: 15px; margin-top: 20px; border-radius: 10px; font-size: 0.8rem; text-align: left; border-left: 4px solid #3b82f6; }
    </style>
</head>
<body>
    <div class="card">
        <img src="https://campuslatinoamerica.edu.co/wp-content/uploads/2024/07/logo-campus-la.png" width="150" style="margin-bottom:20px;">
        <button class="btn-trigger" id="btn" onclick="run()">EJECUTAR EN GIBUHUB</button>
        <div class="status" id="out">> Esperando orden...</div>
    </div>
    <script>
        async function run() {
            const b = document.getElementById('btn');
            const o = document.getElementById('out');
            b.disabled = true; b.innerText = 'ENVIANDO...';
            try {
                const r = await fetch('https://api.github.com/repos/Campusla/Bot-CampusLA/actions/workflows/main.yml/dispatches', {
                    method: 'POST',
                    headers: { 'Authorization': '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', 'Accept': 'application/vnd.github.v3+json' },
                    body: JSON.stringify({ ref: 'main' })
                });
                if (r.ok) { b.style.backgroundColor = '#22c55e'; b.innerText = 'EXITO âœ…'; o.innerText = '> Bot activado.'; }
                else { const e = await r.json(); o.innerText = '> Error: ' + e.message; b.disabled = false; b.innerText = 'REINTENTAR'; }
            } catch (e) { o.innerText = '> Fallo de red.'; b.disabled = false; }
        }
    </script>
</body>
</html>
